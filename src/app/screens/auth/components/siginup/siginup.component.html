<section 

class="signup heightc p-4">
    <h1>
        {{'Be_Part_Of_The_Adventure'|translate}}
    </h1>
    <p class="mb-4">{{'insert_your_phone_number'|translate}}</p>
    <form 
    class="row"
    (ngSubmit)="signUp(signupForm.value)"
    [formGroup]="signupForm"
    >
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="fname"
                type="text" placeholder="{{'first_name'|translate}}">
                <p 
                *ngIf="(signupForm.controls['fname']?.errors!=null && signupForm.controls['fname'].touched) ||
                (signupForm.controls['fname']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'required'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="lname"
                type="text" placeholder="{{'last_name'|translate}}">
                <p 
                *ngIf="(signupForm.controls['lname']?.errors!=null && signupForm.controls['lname'].touched) ||
                (signupForm.controls['lname']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'required'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <app-phone-number
                [inputname]="signupForm.get('mobile')"
                ></app-phone-number>
              <p 
              *ngIf="(signupForm.controls['mobile']?.errors!=null && signupForm.controls['mobile'].touched) ||
              (signupForm.controls['mobile']?.errors!=null && submited)
              "
              class="my-2 text-danger">
                  {{'validphone'|translate}}
              </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="dob"
                #dobirth
                (blur)="dateInputType(dobirth)"
                (change)="dateInputType(dobirth)"
                (focus)="dobirth.type='date'"
                type="text" placeholder="{{'dob'|translate}}">
                <p 
                *ngIf="(signupForm.controls['dob']?.errors!=null && signupForm.controls['dob'].touched) ||
                (signupForm.controls['dob']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'required'|translate}}
                </p>
            </div>
        </div>
        <!--  -->

        <div class="col-md-6 mb-3">
            <div class="form-group">
                <select 
                class="form-select"
                formControlName="area_id"
          >
                    <option value="" selected>{{'area'|translate}}</option>
                    <optgroup 
                    *ngFor="let area of areas"
                    [label]="area?.gov">
                      <option 
                      *ngFor="let item of area?.areas"
                      [value]="item?.id">{{item?.name}}</option>
                    </optgroup>
                  </select>
                  <p 
                  *ngIf="(signupForm.controls['area_id']?.errors!=null && signupForm.controls['area_id'].touched) ||
                  (signupForm.controls['area_id']?.errors!=null && submited)
                  "
                  class="my-2 text-danger">
                      {{'required'|translate}}
                  </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <select 
                style="box-shadow: none;"
                formControlName="gender"
                class="form-select" aria-label="Default select example">
                    <option selected value="">{{'gender'|translate}}</option>
                    <option value="BOY">{{'male'|translate}}</option>
                    <option value="GIRL">{{'female'|translate}}</option>
                  </select>
                <p 
                *ngIf="(signupForm.controls['gender']?.errors!=null && signupForm.controls['gender'].touched) ||
                (signupForm.controls['gender']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'required'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="email"
                type="email" placeholder="{{'email'|translate}}">
                <p 
                *ngIf="(signupForm.controls['email']?.errors!=null && signupForm.controls['email'].touched) ||
                (signupForm.controls['email']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'validemail'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="confirm_email"
                type="email" placeholder="{{'confirm_email'|translate}}">
                <p 
                *ngIf="(signupForm.controls['email']?.value != signupForm.controls['confirm_email']?.value && signupForm.controls['confirm_email'].touched) ||
                (signupForm.controls['email']?.value != signupForm.controls['confirm_email']?.value && submited)
                "
                class="my-2 text-danger">
                    {{'email_mismatch'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="password"
                type="password" placeholder="{{'password'|translate}}">
                <p
                *ngIf="(signupForm.controls['password']?.errors!=null && signupForm.controls['password'].touched) ||
                (signupForm.controls['password']?.errors!=null && submited)
                "
                class="my-2 text-danger">
                    {{'required'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-6 mb-3">
            <div class="form-group">
                <input 
                formControlName="confirm_password"
                type="password" placeholder="{{'confirm_password'|translate}}">
                <p
                *ngIf="(signupForm.controls['password']?.value != signupForm.controls['confirm_password']?.value && signupForm.controls['confirm_password'].touched) ||
                (signupForm.controls['password']?.value != signupForm.controls['confirm_password']?.value && submited)
                "
                class="my-2 text-danger">
                    {{'password_mismatch'|translate}}
                </p>
            </div>
        </div>
        <!--  -->
        <div class="col-md-12 mb-3">
            <div>
                <button 
                [disabled]="loading"
                class="mb-2">
                {{'signup'|translate}}
                <i 
                *ngIf="loading"
                class="fas fa-circle-notch fa-spin"></i>
            </button>
            </div>
        </div>
        <div class="col-md-12 mb-3">
            <div>
                <p>
                    {{'Already_have_account'|translate}}
                    <a routerLink="/auth/login">{{'signin'|translate}}</a>
                </p>
            </div>
        </div>
    </form>
</section>


<div 
[ngClass]="{
    'd-flex':showVerificationpopup,
    'd-none':!showVerificationpopup
}"
*ngIf="showVerificationpopup"
class="cstmpopup ">
    <div class="content small">
        <i 
        (click)="showVerificationpopup=false"
        [ngStyle]="{
            left:lang=='ar'?'20px':'auto',
            right:lang=='ar'?'auto':'20px'
        }"
        class="fa-solid fa-x"></i>
        <div class="container">
            <h2
            class="mb-0 mt-2"
            style="font-weight: 400;font-size:20px;line-height: 30px;"
            >
            {{'please_enter_the_verification_code'|translate}}
            {{signupForm.value?.mobile?.e164Number}}
            </h2>
            <div>
                <input
                [formControl]="verifiedCodeControl"
                placeholder="{{'code'|translate}}"
                type="text" class="form-control my-3">
                <p 
                *ngIf="verifiedCodeControl?.errors!=null && verifiedCodeControl?.touched"
                class="text-danger">
                    Enter the five-digit verification code
                </p>
                <button 
                (click)="verifyCode()"
                [disabled]="verifiedCodeControl?.errors!=null||verifyoading"
                class="orangebtn">
                    {{'verify'|translate}}
                    <i 
                    *ngIf="verifyoading"
                    class="fas fa-circle-notch fa-spin"></i>
                </button>
                <p
                (click)="getOtp()"
                style="cursor: pointer;"
                *ngIf="!loading&&!intervalLoading"
                class="my text-primary">
                    {{'Didnt_receive_the_code'|translate}}
                  
                </p>
                <p 
                class="text-primary my-2"
                *ngIf="intervalLoading">
                    {{counter}}
                </p>
                <i 
                *ngIf="loading"
                class="fas fa-circle-notch fa-spin"></i>
            </div>
        </div>
    </div>
</div>
